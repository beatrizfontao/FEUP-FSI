# FSI - Malware

---

# Botnets

Rede de computadores com um sistema de comando e controlo(C2) que é capaz de controlar computadores normais. O controlador envia comandos através da rede (spam, phishing,...).

As botnets são muito avançadas, sistemas que se podem atualizar automaticamente.

Dois tipos:
- Centralizada: vários servidores para robustez (mais comum)
- Peer-to-peer: auto organizada, pode ter uma estrutura hierárquica

Duas formas de comunicar: 
- push: servidor envia os comandos
- pull: periodicamente o bot pergunta se há comandos

Muitos destes sistemas evoluiram para terem a capacidade de recuperar e serem resilientes no caso do servidor ser alvo de ataque.

### Deteção e Combate

Como detetar e desativar uma botnet.

Estratégias:
- detetar malware na máquina comprometida
- na rede, tentar detetar tráfego com C2
- criar honeypots para serem comprometidas e monitorizadas

Combate:
- Isolar as máquinas alvo
- Isolar/desligar o C2
- Tomar controlo do sistema C2 e desativar a botnet

---

# Erros de Deteção

Falso positivo: alerta para um problema que não existe<br>
Falso negativo: ausência de alerta para problema existente

A precisão refere-se à probabilidade de ocorrer estes erros.

- I => evento de intrusäo, D => evento de alerta/deteqäo
- Falso positivo => Pr [ D | not I]
- Falso negativo => Pr [ not D | I]

Não existe nenhum sistema que não cometa destes erros. É necessário procurar o equilíbrio.

## Como se deteta malware?

- **Signature-based**: reconhecer assinaturas e padrões de ataques(através de back listing). Fácil de implementar, eficaz contra ataques conhecidos.
- **Anomalias**: sistema que possui um modelo do seu funcionamento normal e que quando verifica algum desvio da atividade padrão, dá um alerta. Menos preciso e sensível a cenários mais raros.
- **Integridade/especificação**: especificar o que é correto(através de white listing). Pode apanhar ataques novos, mas exige mais esforço porque tem de estar constantemente atualizado.

# Antivirus